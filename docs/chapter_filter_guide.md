# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥–ª–∞–≤

## –û–±–∑–æ—Ä

–ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥–ª–∞–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏ –∏—Å–∫–ª—é—á–∞—Ç—å –º—É—Å–æ—Ä–Ω—ã–µ –≥–ª–∞–≤—ã (–æ–ø–µ–Ω–∏–Ω–≥–∏, —ç–Ω–¥–∏–Ω–≥–∏, –ø—Ä–æ–º–æ-–º–∞—Ç–µ—Ä–∏–∞–ª—ã) –∏–∑ –≤–∏–¥–µ–æ-–∫–æ–º–ø–∏–ª—è—Ü–∏–π VK –ø–µ—Ä–µ–¥ –Ω–∞—Ä–µ–∑–∫–æ–π –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —ç–ø–∏–∑–æ–¥—ã.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º—É—Å–æ—Ä–Ω—ã–µ –≥–ª–∞–≤—ã –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º:

1. **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏**:
   - –û–ø–µ–Ω–∏–Ω–≥–∏: `op`, `opening`, `–æ–ø–µ–Ω–∏–Ω–≥`, `–æ–ø–µ–Ω–∏–Ω–≥–∏`, `opening\s*\d*`
   - –≠–Ω–¥–∏–Ω–≥–∏: `ed`, `ending`, `—ç–Ω–¥–∏–Ω–≥`, `—ç–Ω–¥–∏–Ω–≥–∏`, `ending\s*\d*`
   - –ü—Ä–æ–º–æ: `promo`, `pv`, `preview`, `—Ç—Ä–µ–π–ª–µ—Ä`, `–ø—Ä–æ–º–æ`, `–∞–Ω–æ–Ω—Å`
   - –î—Ä—É–≥–æ–µ: `credits?`, `—Ç–∏—Ç—Ä—ã`, `–∏–Ω—Ç—Ä–æ`, `outro`, `–ø–µ—Ä–µ—Ä—ã–≤`, `recap`, `–ø–æ–≤—Ç–æ—Ä`

2. **–ü–æ–∑–∏—Ü–∏—è –≥–ª–∞–≤—ã**:
   - –ü–µ—Ä–≤–∞—è –≥–ª–∞–≤–∞, –ø–æ—Ö–æ–∂–∞—è –Ω–∞ –æ–ø–µ–Ω–∏–Ω–≥
   - –ü–æ—Å–ª–µ–¥–Ω—è—è –≥–ª–∞–≤–∞, –ø–æ—Ö–æ–∂–∞—è –Ω–∞ —ç–Ω–¥–∏–Ω–≥ –∏–ª–∏ –ø—Ä–µ–≤—å—é

3. **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–ª–∞–≤—ã**:
   - –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ –≥–ª–∞–≤—ã (–º–µ–Ω–µ–µ 30 —Å–µ–∫—É–Ω–¥)

4. **–ö–æ—Ä–æ—Ç–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ**:
   - –ì–ª–∞–≤—ã —Å –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ (< 10 —Å–∏–º–≤–æ–ª–æ–≤) –≤ –Ω–∞—á–∞–ª–µ –∏–ª–∏ –∫–æ–Ω—Ü–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

### –†—É—á–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –≤—ã–±—Ä–∞—Ç—å –≥–ª–∞–≤—ã –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≥–ª–∞–≤

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É "–ù–∞—Ä–µ–∑–∫–∞" –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ —Å–µ—Ä–∏–∞–ª–∞
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —Å –≤–æ—Ä–æ–Ω–∫–æ–π (üîΩ) "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ"
3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –º—É—Å–æ—Ä–Ω—ã–µ –≥–ª–∞–≤—ã –∏ —Ä–∞–∑–¥–µ–ª–∏—Ç –∏—Ö –Ω–∞:
   - **–ê–∫—Ç–∏–≤–Ω—ã–µ –≥–ª–∞–≤—ã** - –≥–ª–∞–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –Ω–∞—Ä–µ–∑–∞–Ω—ã
   - **–ú—É—Å–æ—Ä–Ω—ã–µ –≥–ª–∞–≤—ã** - –≥–ª–∞–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø—Ä–æ–ø—É—â–µ–Ω—ã

### 2. –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–∞–º–∏

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–í—ã–±—Ä–∞—Ç—å –≥–ª–∞–≤—ã –≤—Ä—É—á–Ω—É—é"
2. –í –ø–æ—è–≤–∏–≤—à–µ–º—Å—è —Å–ø–∏—Å–∫–µ –æ—Ç–º–µ—Ç—å—Ç–µ –≥–∞–ª–æ—á–∫–∞–º–∏ –≥–ª–∞–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –Ω–∞—Ä–µ–∑–∞—Ç—å
3. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä"

### 3. –ó–∞–ø—É—Å–∫ –Ω–∞—Ä–µ–∑–∫–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

1. –ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥–ª–∞–≤ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ù–∞—Ä–µ–∑–∞—Ç—å —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π"
2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥–ª–∞–≤ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –æ–∂–∏–¥–∞–µ–º—ã–º —á–∏—Å–ª–æ–º —ç–ø–∏–∑–æ–¥–æ–≤
3. –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –µ—Å—Ç—å, –Ω–∞—Ä–µ–∑–∫–∞ –Ω–∞—á–Ω–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

## API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### GET /api/media-items/{unique_id}/chapters/filtered
–ü–æ–ª—É—á–∞–µ—Ç –≥–ª–∞–≤—ã –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é.

**–û—Ç–≤–µ—Ç:**
```json
{
  "chapters": [...],           // –í—Å–µ –≥–ª–∞–≤—ã
  "filtered_chapters": [...],  // –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥–ª–∞–≤—ã (–±–µ–∑ –º—É—Å–æ—Ä–Ω—ã—Ö)
  "garbage_chapters": [...],  // –ú—É—Å–æ—Ä–Ω—ã–µ –≥–ª–∞–≤—ã —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
  "expected_count": 12,       // –û–∂–∏–¥–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–∏–∑–æ–¥–æ–≤
  "status_message": "..."     // –°—Ç–∞—Ç—É—Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
}
```

### POST /api/media-items/{unique_id}/chapters/mark-garbage
–†—É—á–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ –º—É—Å–æ—Ä–Ω—ã—Ö –≥–ª–∞–≤.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "garbage_indices": [0, 12]  // –ò–Ω–¥–µ–∫—Å—ã –º—É—Å–æ—Ä–Ω—ã—Ö –≥–ª–∞–≤
}
```

### POST /api/media-items/{unique_id}/slice-with-filter
–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞—Ä–µ–∑–∫–∏ —Å —É—á–µ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "garbage_indices": [0, 12]  // –ò–Ω–¥–µ–∫—Å—ã –º—É—Å–æ—Ä–Ω—ã—Ö –≥–ª–∞–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}
```

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –≥–ª–∞–≤**: –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç yt-dlp –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–≥–ª–∞–≤–ª–µ–Ω–∏—è –∏–∑ VK –≤–∏–¥–µ–æ
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º—É—Å–æ—Ä–Ω—ã—Ö –≥–ª–∞–≤
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≥–ª–∞–≤ —Å –æ–∂–∏–¥–∞–µ–º—ã–º —á–∏—Å–ª–æ–º —ç–ø–∏–∑–æ–¥–æ–≤
4. **–ù–∞—Ä–µ–∑–∫–∞**: SlicingAgent –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥–ª–∞–≤—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤

## –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

- **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –≥–ª–∞–≤—ã**: –•—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–æ–ª–µ `chapters` —Ç–∞–±–ª–∏—Ü—ã `MediaItem`
- **–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥–ª–∞–≤—ã**: –•—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–æ–ª–µ `chapters_filtered` —Ç–∞–±–ª–∏—Ü—ã `MediaItem`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: SlicingAgent —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `chapters_filtered`, –∑–∞—Ç–µ–º `chapters`

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –°–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º—É—Å–æ—Ä–Ω—ã–µ –≥–ª–∞–≤—ã
2. **–ì–∏–±–∫–æ—Å—Ç—å**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–∞–∑–º–µ—Ç–∫—É
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –≥–ª–∞–≤—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –Ω–∏–º
4. **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –æ –ø—Ä–∏—á–∏–Ω–∞—Ö —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–π –≥–ª–∞–≤—ã

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–ª–∞–≤ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤—Å–µ –º—É—Å–æ—Ä–Ω—ã–µ –≥–ª–∞–≤—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω–æ–π —Ä–µ–∂–∏–º –¥–ª—è —Ç–æ—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –Ω–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

### –ì–ª–∞–≤—ã –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∫–∞–∫ –º—É—Å–æ—Ä–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≥–ª–∞–≤ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- –í–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ `ChapterFilter.GARBAGE_PATTERNS`

### –ù–∞—Ä–µ–∑–∫–∞ —Å–æ–∑–¥–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥–ª–∞–≤ —Ä–∞–≤–Ω–æ –æ–∂–∏–¥–∞–µ–º–æ–º—É —á–∏—Å–ª—É —ç–ø–∏–∑–æ–¥–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ SlicingAgent –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –≥–ª–∞–≤–∞—Ö